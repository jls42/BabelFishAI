<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title data-i18n="optionsTitle">BabelFishAI - Configuration</title>
    <link rel="stylesheet" href="options.css">
</head>

<body>
    <div class="container">
        <!-- Message de bienvenue -->
        <div class="welcome-section">
            <h1 data-i18n="optionsTitle">Configuration de BabelFishAI</h1>
            <p class="welcome-message" data-i18n="welcomeMessage"></p>
        </div>



        <!-- Param√®tres Essentiels -->
        <div class="section-block essential-section">
            <h2 data-i18n="essentialSettingsTitle">Param√®tres Essentiels</h2>

            <!-- Section Providers IA - Design Dropdown + Panel -->
            <div class="subsection providers-section">
                <div class="providers-header">
                    <h3 data-i18n="providersTitle">Providers IA</h3>
                    <div class="provider-status-badges" id="dropdownStatus"></div>
                </div>

                <!-- Dropdown s√©lecteur de provider + Toggle -->
                <div class="provider-selector-wrapper">
                    <img src="../../../../images/mistral-logo.png" alt="" id="providerLogo" class="provider-selector-logo">
                    <select id="providerSelector" class="provider-dropdown">
                        <option value="mistral">Mistral AI</option>
                        <option value="openai">OpenAI</option>
                        <option value="custom">Custom/LiteLLM</option>
                    </select>
                    <div class="provider-toggle-wrapper" id="providerToggleWrapper">
                        <label class="provider-toggle" id="toggleOpenAI" aria-label="Enable OpenAI provider">
                            <input type="checkbox" id="openaiEnabled" aria-label="Enable OpenAI">
                            <span class="toggle-slider"></span>
                        </label>
                        <label class="provider-toggle" id="toggleMistral" style="display:none;" aria-label="Enable Mistral provider">
                            <input type="checkbox" id="mistralEnabled" aria-label="Enable Mistral">
                            <span class="toggle-slider"></span>
                        </label>
                        <label class="provider-toggle" id="toggleCustom" style="display:none;" aria-label="Enable Custom provider">
                            <input type="checkbox" id="customEnabled" aria-label="Enable Custom">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Panel de configuration (contenu dynamique selon provider s√©lectionn√©) -->
                <div class="provider-config-panel" id="providerConfigPanel">

                    <!-- Config OpenAI -->
                    <div class="provider-config" id="configOpenAI" data-provider="openai">
                        <div class="provider-config-body">
                            <div class="api-key-container">
                                <input type="password" id="openaiApiKey" data-i18n-placeholder="apiKeyPlaceholder" placeholder="sk-...">
                                <button type="button" class="toggle-password" data-target="openaiApiKey">üëÅÔ∏è</button>
                            </div>
                            <div class="api-help">
                                <span data-i18n="apiKeyInfo">Obtenez votre cl√© API sur</span>
                                <a href="https://platform.openai.com/account/api-keys" target="_blank" class="api-link">platform.openai.com</a>
                            </div>
                            <details class="provider-advanced">
                                <summary data-i18n="modelsConfigTitle">Configuration des mod√®les</summary>
                                <div class="custom-models-section">
                                    <div class="form-group">
                                        <label for="openaiTranscriptionModel" data-i18n="transcriptionModelLabel">Mod√®le de transcription :</label>
                                        <select id="openaiTranscriptionModel" class="model-select"></select>
                                        <div class="model-input-container">
                                            <input type="text" id="newOpenaiTranscriptionModel" placeholder="whisper-large-v3">
                                            <button type="button" id="addOpenaiTranscriptionModel" data-i18n="addModelButton">Ajouter</button>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="openaiChatModel" data-i18n="chatModelLabel">Mod√®le de chat :</label>
                                        <select id="openaiChatModel" class="model-select"></select>
                                        <div class="model-input-container">
                                            <input type="text" id="newOpenaiChatModel" placeholder="gpt-4-turbo">
                                            <button type="button" id="addOpenaiChatModel" data-i18n="addModelButton">Ajouter</button>
                                        </div>
                                    </div>
                                </div>
                            </details>
                        </div>
                    </div>

                    <!-- Config Mistral -->
                    <div class="provider-config" id="configMistral" data-provider="mistral" style="display: none;">
                        <div class="provider-config-body">
                            <div class="api-key-container">
                                <input type="password" id="mistralApiKey" data-i18n-placeholder="apiKeyPlaceholder" placeholder="...">
                                <button type="button" class="toggle-password" data-target="mistralApiKey">üëÅÔ∏è</button>
                            </div>
                            <div class="api-help">
                                <span data-i18n="mistralApiKeyInfo">Obtenez votre cl√© API sur</span>
                                <a href="https://console.mistral.ai/api-keys" target="_blank" class="api-link">console.mistral.ai</a>
                            </div>
                            <details class="provider-advanced">
                                <summary data-i18n="modelsConfigTitle">Configuration des mod√®les</summary>
                                <div class="custom-models-section">
                                    <div class="form-group">
                                        <label for="mistralTranscriptionModel" data-i18n="transcriptionModelLabel">Mod√®le de transcription :</label>
                                        <select id="mistralTranscriptionModel" class="model-select"></select>
                                        <div class="model-input-container">
                                            <input type="text" id="newMistralTranscriptionModel" placeholder="voxtral-large">
                                            <button type="button" id="addMistralTranscriptionModel" data-i18n="addModelButton">Ajouter</button>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="mistralChatModel" data-i18n="chatModelLabel">Mod√®le de chat :</label>
                                        <select id="mistralChatModel" class="model-select"></select>
                                        <div class="model-input-container">
                                            <input type="text" id="newMistralChatModel" placeholder="mistral-nemo">
                                            <button type="button" id="addMistralChatModel" data-i18n="addModelButton">Ajouter</button>
                                        </div>
                                    </div>
                                </div>
                            </details>
                        </div>
                    </div>

                    <!-- Config Custom/LiteLLM -->
                    <div class="provider-config" id="configCustom" data-provider="custom" style="display: none;">
                        <div class="provider-config-body">
                            <div class="api-key-container">
                                <input type="password" id="customApiKey" data-i18n-placeholder="apiKeyPlaceholder" placeholder="...">
                                <button type="button" class="toggle-password" data-target="customApiKey">üëÅÔ∏è</button>
                            </div>
                            <p class="option-description" data-i18n="customProviderDescription">Provider personnalis√© pour LiteLLM ou autres proxies.</p>
                            <div class="provider-urls custom-urls-required">
                                <div class="form-group">
                                    <label for="customTranscriptionUrl" data-i18n="customTranscriptionUrlLabel">URL Transcription :</label>
                                    <input type="text" id="customTranscriptionUrl" placeholder="http://localhost:4000/v1/audio/transcriptions">
                                </div>
                                <div class="form-group">
                                    <label for="customChatUrl" data-i18n="customChatUrlLabel">URL Chat :</label>
                                    <input type="text" id="customChatUrl" placeholder="http://localhost:4000/v1/chat/completions">
                                </div>
                            </div>
                            <div class="form-group nolog-option">
                                <label class="feature-toggle">
                                    <input type="checkbox" id="disableLogging">
                                    <span data-i18n="noLogLabel">NoLog</span>
                                </label>
                                <p class="option-description" data-i18n="noLogDescription"></p>
                            </div>
                            <details class="provider-advanced">
                                <summary data-i18n="modelsConfigTitle">Configuration des mod√®les</summary>
                                <div class="custom-models-section">
                                    <div class="form-group">
                                        <label for="customTranscriptionModel" data-i18n="transcriptionModelLabel">Mod√®le de transcription :</label>
                                        <select id="customTranscriptionModel" class="model-select"></select>
                                        <div class="model-input-container">
                                            <input type="text" id="newCustomTranscriptionModel" placeholder="whisper-large-v3">
                                            <button type="button" id="addCustomTranscriptionModel" data-i18n="addModelButton">Ajouter</button>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="customChatModel" data-i18n="chatModelLabel">Mod√®le de chat :</label>
                                        <select id="customChatModel" class="model-select"></select>
                                        <div class="model-input-container">
                                            <input type="text" id="newCustomChatModel" placeholder="llama-3.1-70b">
                                            <button type="button" id="addCustomChatModel" data-i18n="addModelButton">Ajouter</button>
                                        </div>
                                    </div>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- S√©lection des services (visible si plusieurs providers actifs) -->
                <div class="provider-services" id="providerServices" style="display: none;">
                    <h4 data-i18n="serviceSelectionTitle">S√©lection des services</h4>
                    <div class="services-grid">
                        <div class="service-selector">
                            <label for="transcriptionProvider" data-i18n="transcriptionProviderLabel">Transcription :</label>
                            <select id="transcriptionProvider"></select>
                        </div>
                        <div class="service-selector">
                            <label for="chatProvider" data-i18n="chatProviderLabel">Traduction/Reformulation :</label>
                            <select id="chatProvider"></select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Configuration API legacy (masqu√©e, pour r√©trocompatibilit√©) -->
            <div class="subsection api-section" id="legacyApiSection" style="display: none;">
                <h3 data-i18n="apiKeyConfigTitle">Cl√© API OpenAI</h3>
                <div class="api-help">
                    <p data-i18n="apiKeyHelp"></p>
                    <div class="api-info">
                        <span data-i18n="apiKeyInfo">Obtenez votre cl√© API sur</span>
                        <a href="https://platform.openai.com/account/api-keys" target="_blank" class="api-link">
                            platform.openai.com/account/api-keys
                        </a>
                    </div>
                    <div class="api-info">
                        <span data-i18n="pricingInfo">Plus d'informations sur la tarification disponibles sur</span>
                        <a href="https://platform.openai.com/docs/pricing" target="_blank" class="api-link">
                            platform.openai.com/docs/pricing
                        </a>
                    </div>
                </div>
                <div class="api-key-container">
                    <input type="password" id="apiKey" data-i18n-placeholder="apiKeyPlaceholder">
                    <button type="button" id="toggleApiKey" class="toggle-password">üëÅÔ∏è</button>
                </div>
            </div>
            <!-- Instructions d'utilisation -->
            <div class="subsection usage-section">
                <h3 data-i18n="shortcutsTitle">Utilisation et Raccourcis</h3>
                <p>
                    <span data-i18n="useBabelFishInstructions"></span>
                </p>
                <div class="shortcut-info">
                    <p data-i18n="shortcutInstructions"></p>
                    <p>
                        <span data-i18n="shortcutOption1"></span>
                        <br>
                        <span data-i18n="shortcutChangeInstructions"></span>
                    </p>
                    <p>
                        <span data-i18n="shortcutOption2"></span>
                        <br>
                        <span class="keyboard-shortcut">chrome://extensions/shortcuts</span>
                    </p>
                    <div class="shortcut-steps">
                        <p data-i18n="shortcutSteps"></p>
                    </div>
                </div>
            </div>

            <!-- Langue de l'interface -->
            <div class="subsection language-section">
                <h3 data-i18n="languageSettingsTitle">Langue de l'interface</h3>
                <div class="language-selector">
                    <label for="interfaceLanguage" data-i18n="selectLanguageLabel">S√©lectionnez la langue :</label>
                    <select id="interfaceLanguage">
                        <option value="fr">Fran√ßais</option>
                        <option value="en">English</option>
                        <option value="es">Espa√±ol Traducida por IA</option>
                        <option value="pt">Portugu√™s Traduzido por IA</option>
                        <option value="zh">‰∫∫Â∑•Êô∫ËÉΩÁøªËØë</option>
                        <option value="hi">‡§è‡§Ü‡§à ‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶‡§ø‡§§ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                        <option value="ar">ÿ™ÿ±ÿ¨ŸÖÿ© ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑‡§®‡§æÿπŸä</option>
                        <option value="it">Tradotto da IA in Italiano</option>
                        <option value="de">KI-√úbersetzung auf Deutsch</option>
                        <option value="sv">AI-√∂versatt svenska</option>
                        <option value="pl">T≈Çumaczenie AI na jƒôzyk polski</option>
                        <option value="nl">AI-vertaald Nederlands</option>
                        <option value="ro">Tradus de IA √Æn Rom√¢nƒÉ</option>
                        <option value="ja">AIÁøªË®≥Êó•Êú¨Ë™û</option>
                        <option value="ko">AI Î≤àÏó≠ ÌïúÍµ≠Ïñ¥</option>
                    </select>
                </div>
            </div>
        </div>


        <!-- Section Am√©lioration de texte -->
        <div class="section-block enhancement-section">
            <h2 data-i18n="enhancementTitle">Am√©lioration de texte IA</h2>
            <div>
                <label class="feature-toggle">
                    <input type="checkbox" id="enableRephrase">
                    <span data-i18n="rephraseLabel">Activer la reformulation automatique</span>
                </label>
                <p class="option-description" data-i18n="rephraseDescription">Si activ√©, le texte transcrit sera
                    reformul√© pour am√©liorer sa clart√© et sa fluidit√©.</p>
            </div>
        </div>

        <!-- Section Traduction -->
        <div class="section-block translation-section">
            <h2 data-i18n="translationTitle">Traduction IA Int√©gr√©e</h2>
            <div>
                <label class="feature-toggle">
                    <input type="checkbox" id="enableTranslation">
                    <span data-i18n="enableTranslationLabel">Activer la traduction automatique</span>
                </label>
            </div>
            <div id="translationOptions" style="display: none;">
                <p data-i18n="translationExplanation"></p>
                <div class="language-pair">
                    <div class="language-select">
                        <label for="sourceLanguage" data-i18n="sourceLanguageLabel">Langue source :</label>
                        <select id="sourceLanguage">
                            <option value="auto" data-i18n="automaticLanguage">Automatique</option>
                            <option value="fr">Fran√ßais (fr)</option>
                            <option value="en">English (en)</option>
                            <option value="es">Espa√±ol (es)</option>
                            <option value="pt">Portugu√™s (pt)</option>
                            <option value="zh">‰∏≠Êñá (zh)</option>
                            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä (hi)</option>
                            <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (ar)</option>
                            <option value="it">Italiano (it)</option>
                            <option value="de">Deutsch (de)</option>
                            <option value="sv">Svenska (sv)</option>
                            <option value="pl">Polski (pl)</option>
                            <option value="nl">Nederlands (nl)</option>
                            <option value="ro">Rom√¢nƒÉ (ro)</option>
                            <option value="ja">Êó•Êú¨Ë™û (ja)</option>
                            <option value="ko">ÌïúÍµ≠Ïñ¥ (ko)</option>
                        </select>
                    </div>
                    <div class="language-select">
                        <label for="targetLanguage" data-i18n="targetLanguageLabel">Langue cible :</label>
                        <select id="targetLanguage">
                            <option value="en">English (en)</option>
                            <option value="fr">Fran√ßais (fr)</option>
                            <option value="es">Espa√±ol (es)</option>
                            <option value="pt">Portugu√™s (pt)</option>
                            <option value="zh">‰∏≠Êñá (zh)</option>
                            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä (hi)</option>
                            <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (ar)</option>
                            <option value="it">Italiano (it)</option>
                            <option value="de">Deutsch (de)</option>
                            <option value="sv">Svenska (sv)</option>
                            <option value="pl">Polski (pl)</option>
                            <option value="nl">Nederlands (nl)</option>
                            <option value="ro">Rom√¢nƒÉ (ro)</option>
                            <option value="ja">Êó•Êú¨Ë™û (ja)</option>
                            <option value="ko">ÌïúÍµ≠Ïñ¥ (ko)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bouton de sauvegarde principal -->
        <button id="save" class="save-button" data-i18n="saveButton">Sauvegarder</button>
        <div id="status" class="status"></div>

        <!-- Mode Avanc√© (repliable) -->
        <div class="section-block advanced-section">
            <div class="advanced-header" id="advancedHeader">
                <h2 data-i18n="advancedSettingsTitle">Param√®tres Avanc√©s</h2>
                <button class="toggle-advanced" id="toggleAdvanced">‚ñº</button>
            </div>

            <div id="advancedOptions">
                <!-- Param√®tres d'Affichage -->
                <div class="subsection display-section">
                    <h3 data-i18n="displaySettingsTitle">Param√®tres d'Affichage</h3>
                    <div>
                        <label class="feature-toggle">
                            <input type="checkbox" id="activeDisplay" checked>
                            <span data-i18n="activeDisplayLabel">Zone active (saisie clavier)</span>
                        </label>
                        <p class="option-description" data-i18n="activeDisplayDescription"></p>
                    </div>
                    <div>
                        <label class="feature-toggle">
                            <input type="checkbox" id="dialogDisplay">
                            <span data-i18n="dialogDisplayLabel">Bo√Æte de dialogue</span>
                        </label>
                        <p class="option-description" data-i18n="dialogDisplayDescription"></p>
                    </div>
                    <div id="dialogDurationGroup">
                        <label for="dialogDuration" data-i18n="dialogDurationLabel">Dur√©e d'affichage de la bo√Æte
                            (secondes) :</label>
                        <input type="number" id="dialogDuration" min="5" max="60" value="15">
                        <p class="option-description" data-i18n="dialogDurationDescription"></p>
                    </div>
                    <div>
                        <label class="feature-toggle">
                            <input type="checkbox" id="autoCopy">
                            <span data-i18n="autoCopyLabel">Copie automatique dans le presse-papiers</span>
                        </label>
                        <p class="option-description" data-i18n="autoCopyDescription">Si activ√©, le r√©sultat sera
                            automatiquement copi√© dans le presse-papiers et la bo√Æte de dialogue n'appara√Ætra plus pour
                            la transcription.</p>
                    </div>
                    <div class="color-picker-container">
                        <label data-i18n="bannerColorsLabel">Couleurs du bandeau de statut :</label>
                        <p class="option-description" data-i18n="bannerColorsDescription"></p>
                        <div class="gradient-colors-container">
                            <div class="color-input-group">
                                <label for="bannerColorStart" data-i18n="startColorLabel">Couleur d√©but :</label>
                                <input type="color" id="bannerColorStart" value="#684054">
                                <p class="option-description" data-i18n="startColorDescription"></p>
                            </div>
                            <div class="color-input-group">
                                <label for="bannerColorEnd" data-i18n="endColorLabel">Couleur fin :</label>
                                <input type="color" id="bannerColorEnd" value="#4c7b8d">
                                <p class="option-description" data-i18n="endColorDescription"></p>
                            </div>
                            <div class="opacity-group">
                                <input type="number" id="bannerOpacity" min="0" max="100" value="80"
                                    class="opacity-input">
                                <span class="opacity-label" data-i18n="opacityLabel">% Opacit√©</span>
                                <p class="option-description" data-i18n="opacityDescription"></p>
                            </div>
                        </div>
                        <div class="color-preview" id="colorPreview"></div>
                    </div>
                </div>

                <!-- Domaines avec bo√Æte de dialogue forc√©e -->
                <div class="subsection forced-domains-section">
                    <h3 data-i18n="forcedDialogDomainsLabel">Domaines avec bo√Æte de dialogue forc√©e</h3>
                    <p class="option-description" data-i18n="forcedDialogDomainsDescription"></p>
                    <div class="domains-list" id="domainsList"></div>
                    <div class="domain-input-container">
                        <input type="text" id="newDomain" data-i18n-placeholder="addDomainPlaceholder"
                            placeholder="Exemple: chat.google.com">
                        <button type="button" id="addDomain" class="add-domain-button"
                            data-i18n="addDomainButton">Ajouter</button>
                    </div>
                    <div class="api-info" data-i18n="forcedDialogInfo">Sur ces domaines, la transcription
                        appara√Ætra toujours dans une bo√Æte de dialogue</div>
                </div>

                <!-- Bouton de sauvegarde pour les options avanc√©es -->
                <button id="saveAdvanced" class="save-button" data-i18n="saveButton">Sauvegarder</button>
            </div>

            <!-- Section Auteur -->
            <div class="section-block author-section">
                <h2 data-i18n="authorSectionTitle">√Ä Propos de l'Auteur</h2>
                <div class="author-content">
                    <img src="../../../../images/logo_jls42.png" alt="Logo JLS42" class="author-logo">
                    <div class="author-info">
                        <h3 data-i18n="authorName">Julien LS</h3>
                        <p data-i18n="authorRole">D√©veloppeur et cr√©ateur de BabelFishAI</p>
                        <div class="author-links">
                            <a href="https://jls42.org/" target="_blank" class="api-link">
                                <span class="author-icon">üåê</span> jls42.org
                            </a>
                            <a href="mailto:contact@jls42.org" class="api-link">
                                <span class="author-icon">‚úâÔ∏è</span> contact@jls42.org
                            </a>
                            <a href="https://github.com/jls42/BabelFishAI" target="_blank" class="api-link">
                                <span class="author-icon">üêô</span> <span data-i18n="githubLink">GitHub</span>
                            </a>
                            <a href="https://paypal.me/jls" target="_blank" class="api-link">
                                <span class="author-icon">üíù</span> <span data-i18n="supportProject">Soutenir le projet
                                    via
                                    PayPal</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Chargement des scripts dans le bon ordre -->
    <script src="../../constants.js"></script>
    <script src="../../utils/providers.js"></script>
    <script src="../../utils/i18n.js"></script>
    <script src="options.js"></script>
</body>

</html>