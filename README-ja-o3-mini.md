# Babel Fish AI - AIによる音声転写および翻訳拡張機能

**拡張機能を使用するには、OpenAIのAPIキー（またはLiteLLM Proxyを使用する場合はサードパーティプロバイダー）が必要です。OpenAIのAPIキーはここから生成できます： [https://platform.openai.com/account/api-keys](https://platform.openai.com/account/api-keys)**

Babel Fish AIは、元々強力な音声転写を提供するために設計された革新的なChrome拡張機能です。OpenAIのWhisper APIを使用して、あなたの声を驚異的な精度でテキストに変換し、オプションでリアルタイム自動翻訳も利用できます。Babel Fish AIは、転写専用として使用するか、必要に応じてその場で翻訳を有効にするかを選択できます。

[![CodeFactor](https://www.codefactor.io/repository/github/jls42/babelfishai/badge)](https://www.codefactor.io/repository/github/jls42/babelfishai)

## 🌟 機能

- **高度な音声転写**
  - お使いのデバイスのマイクを通じて高品質なオーディオをキャプチャ。
  - OpenAIのWhisper APIによって実現される正確な転写。
  - 複数言語の音声認識とテキスト表示に対応しており、様々な言語の音声入力を転写し、希望の言語で結果（転写および翻訳、翻訳が有効な場合）を表示。
  - アクティブな入力欄へ自動的にテキストを挿入するか、専用のダイアログボックスに表示。

- **統合自動翻訳（オプション）**
  - 必要に応じて有効化できる、多言語への転写内容を即時に翻訳。
  - 意味を忠実に再現するために先進的なAIモデルを使用。
  - 転写のみの使用または転写と翻訳の組み合わせを自由に選択可能。

- **直感的でカスタマイズ可能なユーザーインターフェース**
  - 柔軟な表示モード：アクティブな入力欄または浮動ダイアログウィンドウ。
  - 色、透明度、表示時間を選択できるステータスバー。
  - 録音の開始/停止用ショートカットキー（Ctrl+Shift+1 またはMacでは⌘+Shift+1）。
  - マイクと数字「42」を統合したカスタムアイコンで即時認識。

- **高度なオプション**
    - 詳細な設定が可能なエキスパートモード（APIのURL、ドメインごとの設定など）。
    - 転写および翻訳モデルのカスタマイズが可能。
    - LiteLLM Proxyとの互換性により、代替の言語モデルへの接続およびリクエストログの無効化が可能。
    - 言語ファイル (_locales) による完全な国際化対応で、複数の言語でのインターフェースと音声サポートを提供。

## 🌐 対応言語

- アラビア語
- ドイツ語
- 英語
- スペイン語
- フランス語
- ヒンディー語
- イタリア語
- 日本語
- 韓国語
- オランダ語
- ポーランド語
- ポルトガル語
- ルーマニア語
- スウェーデン語
- 中国語

## 🚀 インストール

1.  **ダウンロードとインストール：**
    - このリポジトリをGitHubからクローンするか、拡張機能のフォルダを手動でダウンロードしてください。
    - Chromeを開いて `chrome://extensions/` にアクセスします。
    - 右上の「デベロッパーモード」を有効にします。
    - 「パッケージ化されていない拡張機能を読み込む」をクリックし、Babel Fish AIのフォルダを選択します。

2.  **確認：**
    - 拡張機能がChromeのツールバーにカスタムアイコン付きで表示されていることを確認してください。

## ⚙️ 設定

1.  **OpenAI APIキー：**
    *   拡張機能のアイコンをクリックしてオプションにアクセスします。
    *   OpenAI APIキーを入力します（[platform.openai.com/account/api-keys](https://platform.openai.com/account/api-keys)で入手可能）。

2.  **オプションのカスタマイズ：**
    *   表示モードを選択（アクティブな入力欄またはダイアログボックス）。
    *   ステータスバーの色、透明度、表示時間を設定。
    *   転写（音声入力）およびテキスト表示用の言語を選択。
    *   必要に応じて翻訳機能の有効化または無効化を選択。

3.  **(オプション) LiteLLM Proxyの使用：**
    *   オプションで「エキスパートモード」を有効にします。
    *   「高度な設定」セクションで、LiteLLM Proxyインスタンスを指すようにAPI（Whisperおよび翻訳）の両URLを変更します。**両方に同じベースURLを使用してください。**
    *   LiteLLMによるリクエストログを無効にしたい場合は、「NoLog (LiteLLMのみ)」オプションにチェックを入れてください。

## 🚀 LiteLLM Proxyの使用

OpenAI以外の言語モデルを使用したい場合は、LiteLLM Proxyを利用できます。設定方法は以下の通りです：

Babel Fish AIは [LiteLLM Proxy](https://litellm.ai/) と互換性があり、OpenAIと互換性のあるAPIを介して代替の言語モデルを使用することが可能です。

### 設定

1.  **LiteLLM Proxyのインストールと設定：** LiteLLMのサイトに記載の手順に従ってください。
2.  **Babel Fish AI拡張機能の設定：**
    *   拡張機能のオプション（アイコンを右クリック → オプション）で「エキスパートモード」を有効にします。
    *   「高度な設定」セクションで、LiteLLM Proxyインスタンスを指すようにAPI（Whisperおよび翻訳）の両URLを変更します（例：`http://localhost:4000/v1/audio/transcriptions` と `http://localhost:4000/v1/chat/completions`）。**両方に同じベースURLを使用してください。**
    *   LiteLLMによるリクエストログの無効化を希望する場合は、「NoLog (LiteLLMのみ)」オプションにチェックを入れてください。

**重要：** 「NoLog」オプションはLiteLLM Proxy専用に設計されています。OpenAIの公式APIを使用している場合は、**有効にしないでください**。そうしないとエラーが発生し、翻訳が機能しなくなります。

## 🛠️ 技術的な動作

### 拡張機能のアーキテクチャ

拡張機能は複数のJavaScriptファイルで構成され、相互に連携します：

*   **`manifest.json`:** 拡張機能の主要な設定ファイルです。許可、スクリプト、アクセス可能なリソースなどを定義します。マニフェストバージョン3を使用し、`activeTab`、`storage`、`commands`、`scripting`の許可を宣言しています。`content_scripts`はすべてのURLにインジェクトされ、ドキュメントの読み込み完了時に実行されます。
*   **`background.js`:** バックグラウンドで実行されるサービスワーカーで、イベント（アイコンのクリック、キーボードショートカット）を管理し、必要に応じて`content script`をインジェクトし、`content script`と通信します。
*   **`content.js`:** Webページにインジェクトされるスクリプトで、DOMと直接やり取りし、マイクからのオーディオをキャプチャし、転写および翻訳APIを呼び出し、結果を表示します。
*   **`src/utils/api.js`:** OpenAIのWhisper API（転写）を呼び出すための `transcribeAudio` 関数を含みます。
*   **`src/utils/translation.js`:** OpenAIのGPT API（翻訳）を呼び出すための `translateText` 関数を含みます。
*   **`src/utils/ui.js`:** ユーザーインターフェース（バナー、ダイアログボックス、コピー用ボタン）を管理するためのユーティリティ関数を含みます。
*   **`src/constants.js`:** 設定、状態、アクションなどの定数を定義しています。
*   **`src/pages/options/`:** 拡張機能のオプションページ用ファイル（HTML、CSS、JavaScript）を含みます。

### 転写と翻訳のプロセス

1.  **録音の開始：** ユーザーは拡張機能のアイコンをクリックするか、キーボードショートカットを使用して録音を開始します。`background script`は録音開始のために`content script`にメッセージを送信します。
2.  **オーディオキャプチャ：** `content script`は`navigator.mediaDevices.getUserMedia`APIを使用してマイクにアクセスし、オーディオを録音します。
3.  **転写：** `content script`は`src/utils/api.js`内の`transcribeAudio`関数を使用して、オーディオをOpenAIのWhisper APIに送信します。APIは転写されたテキストを返します。
4.  **翻訳（オプション）：** 翻訳オプションが有効な場合、`content script`は`src/utils/translation.js`内の`translateText`関数を使用して、転写されたテキストをOpenAIのGPT APIに送信します。APIは翻訳されたテキストを返します。
5.  **表示：** `content script`は、転写されたテキスト（および必要に応じて翻訳されたテキスト）を、ページ内のアクティブな要素（テキスト入力欄または編集可能な要素の場合）またはダイアログボックスに表示します。

### 通信

`background script`と`content script`間の通信は、ChromeのメッセージングAPI（`chrome.runtime.sendMessage`および`chrome.runtime.onMessage`）を通じて行われます。

### データの保存

拡張機能は`chrome.storage.sync`を使用して、以下を保存します：

*   OpenAI APIキー（`apiKey`）。
*   拡張機能のオプション（表示、翻訳、ステータスバーの色など）。

これらのデータは、Chromeの拡張機能ストレージにローカルで保存されます。

### エラー処理

発生しうるエラー（APIキーの未設定、転写エラーなど）は`constants.js`に定義されています。`api.js`および`translation.js`の関数は、API呼び出しにおける潜在的なエラーを処理します。`content.js`は、エラーメッセージをページ上部のバナーでユーザーに表示します。

## 🛡️ セキュリティとプライバシー

- **データの保護：**
  - APIキーはChrome内で安全に保管されます。
  - 拡張機能は音声データを保存せず、すべての処理をリアルタイムで実行します。
  - APIとの通信は安全なHTTPS接続を通じて行われます。

BabelFishAIがあなたのデータをどのように管理しているかの詳細については、[プライバシーポリシー](PRIVACY.md)をご参照ください。

## 🔧 トラブルシューティング

- **マイクの問題：**
  - Chromeにおけるマイクアクセスの許可を確認してください。
  - 他のアプリケーションが同時にマイクを使用していないか確認してください。

- **転写/翻訳のエラー：**
  - APIキーが有効かつアクティブであることを確認してください。
  - 安定したインターネット接続があることを確認してください。
  - エラーが発生した場合は、詳細なログを得るためにChromeのコンソールを確認してください。

## 🤝 貢献

貢献や提案は大歓迎です。貢献方法：
- GitHubのIssuesセクションを通じてバグを報告してください。
- 改善や新機能の提案を行ってください。
- プルリクエストを送信してください。

## 📄 ライセンス

この拡張機能はGNU Affero General Public License v3.0 (AGPL-3.0)の下で配布されています。詳細についてはLICENSEファイルをご確認ください。

## 💝 支援

この拡張機能を気に入っていただけたら、[PayPal](https://paypal.me/jls)を通じて開発を支援してください.
---
jls42.orgによって、情熱と革新をもって開発されたBabel Fish AIは、最先端の人工知能により音声転写と翻訳を新たな地平へと推進します.

**この文書は fr 版から ja 言語へ o3-mini モデルを使用して翻訳されました。翻訳プロセスの詳細については、https://gitlab.com/jls42/ai-powered-markdown-translator をご覧ください。**

