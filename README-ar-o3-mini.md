# بابيل فيش إيه آي - امتداد النسخ الصوتي والترجمة باستخدام الذكاء الاصطناعي

<img src="images/icon128.png" alt="أيقونة بابيل فيش إيه آي" width="128" height="128">

**لاستخدام الامتداد، ستحتاج إلى مفتاح API من OpenAI (أو من مزود طرف ثالث إذا كنت تستخدم LiteLLM Proxy). يمكنك إنشاء مفتاح API من OpenAI هنا: [https://platform.openai.com/account/api-keys](https://platform.openai.com/account/api-keys)**

بابيل فيش إيه آي هو امتداد مبتكر لمتصفح كروم صُمم في الأصل لتقديم نسخ صوتي قوي. حول صوتك إلى نص بدقة ملحوظة باستخدام API Whisper من OpenAI، واستفد اختيارياً من الترجمة التلقائية في الوقت الحقيقي. يمكنك استخدام بابيل فيش إيه آي حصرياً للنسخ الصوتي أو تفعيل الترجمة أثناء الاستخدام حسب احتياجاتك.

[![CodeFactor](https://www.codefactor.io/repository/github/jls42/babelfishai/badge)](https://www.codefactor.io/repository/github/jls42/babelfishai) [![Codacy Badge](https://app.codacy.com/project/badge/Grade/59bfe4cd13444ee1b4cffa58300dd043)](https://app.codacy.com/gh/jls42/BabelFishAI/dashboard?utm_source=gh&utm_medium=referral&utm_content=&utm_campaign=Badge_grade)

## 🌟 الميزات

- **نسخ صوتي متقدم**
  - التقاط صوت عالي الجودة عبر ميكروفون جهازك.
  - نسخ دقيق يتم بواسطة API Whisper من OpenAI.
  - دعم متعدد اللغات للتعرف على الصوت وعرض النص، مما يسمح بنسخ المدخلات الصوتية بلغات مختلفة وعرض النتائج (النسخ والترجمة، إذا تم تفعيلها) باللغة التي تختارها.
  - إدراج تلقائي للنص في الحقل النشط أو عرضه في صندوق حوار مخصص.

- **ترجمة وإعادة صياغة ذكية**
  - ترجمة فورية للنصوص المنسوخة إلى لغات متعددة، يمكن تفعيلها حسب الحاجة.
  - إعادة صياغة النص لتحسين أسلوبه ووضوحه.
  - استخدام نموذج ذكاء اصطناعي متقدم لضمان ترجمة أمينة للمعنى الأصلي.
  - حرية اختيار استخدام النسخ الصوتي فقط أو الجمع بين النسخ الصوتي والترجمة.

- **قائمة سياقية قوية**
  - خيار "إعادة صياغة التحديد" لتحسين نصوصك المحددة على الفور.
  - خيار "ترجمة التحديد" مع قائمة فرعية بجميع اللغات المتاحة.
  - استبدال مباشر للنص المحدد بنسخته المترجمة أو المعاد صياغتها.
  - تكامل مثالي في واجهة مستخدم كروم الأصلية.

- **واجهة مستخدم بديهية وقابلة للتخصيص**
  - وضع عرض مرن: منطقة الإدخال النشط أو نافذة حوار عائمة.
  - شريط حالة قابل للتهيئة مع إمكانية اختيار الألوان والشفافية ومدة العرض.
  - اختصار لوحة المفاتيح (Ctrl+Shift+1 أو ⌘+Shift+1 على أجهزة الماك) لبدء/إيقاف التسجيل.
  - خيار "الإبقاء مفتوحاً" للتحكم في مدة عرض النتائج.
  - أيقونة مخصصة، تضم ميكروفوناً والرقم "42"، للتعرف الفوري.

- **خيارات متقدمة**
    - الوضع الخبير لإعدادات مفصلة (عناوين URLs الخاصة بواجهات البرمجة للتطبيقات، التكوين حسب النطاق، إلخ).
    - إمكانية تخصيص نماذج النسخ والترجمة.
    - التوافق مع LiteLLM Proxy للاتصال بنماذج لغوية بديلة وتعطيل تسجيل الاستعلامات.
    - إدارة كاملة للتدويل بفضل ملفات اللغة (_locales)، مما يوفر واجهة ودعم صوتي بعدة لغات.

## 🌐 اللغات المدعومة

إليك قائمة اللغات المدعومة من بابيل فيش إيه آي، مع روابط لفيديوهات عرض توضيحية:

- [العربية](https://www.youtube.com/watch?v=onzOGx7nbUE)
- [الألمانية](https://www.youtube.com/watch?v=G1QVF1NTQYE)
- [الإنجليزية](https://www.youtube.com/watch?v=QC8WiIszn3Q)
- [الإسبانية](https://www.youtube.com/watch?v=nA93pis4vDQ)
- [الفرنسية](https://www.youtube.com/watch?v=ITNFjx7Mgo4)
- [الهندية](https://www.youtube.com/watch?v=FMEYdwCqoPg)
- [الإيطالية](https://www.youtube.com/watch?v=QgYZt8myods)
- [اليابانية](https://www.youtube.com/watch?v=noHEJCnocH8)
- [الكورية](https://www.youtube.com/watch?v=YrYN75YSH3w)
- [الهولندية](https://www.youtube.com/watch?v=OnAZHzbd2NQ)
- [البولندية](https://www.youtube.com/watch?v=E5AVNjZYOxM)
- [البرتغالية](https://www.youtube.com/watch?v=st0XwCV1tvo)
- [الرومانية](https://www.youtube.com/watch?v=H2IMpU5_Hew)
- [السويدية](https://www.youtube.com/watch?v=HMMzGyW8000)
- [الصينية](https://www.youtube.com/watch?v=OJe6oVA_Y0s)

## 🚀 التثبيت

1.  **التنزيل والتثبيت:**
    - قم باستنساخ هذا المخزن من GitHub أو قم بتنزيل مجلد الامتداد يدوياً.
    - **أو قم بتثبيت الامتداد مباشرة من [Chrome Web Store](https://chromewebstore.google.com/detail/babelfishai-by-jls42org/aahodplbenfmijbeahnhoklpdnmfdmbk)**
    - افتح متصفح كروم وانتقل إلى `chrome://extensions/`.
    - فَعّل «وضع المطور» في أعلى اليمين.
    - اضغط على «تحميل الامتداد غير المضغوط» واختر مجلد بابيل فيش إيه آي.

2.  **التحقق:**
    - تأكد من ظهور الامتداد في شريط أدوات كروم مع الأيقونة المخصصة.

## ⚙️ التهيئة

1.  **مفتاح API الخاص بـ OpenAI:**
    *   اضغط على أيقونة الامتداد للوصول إلى الخيارات.
    *   أدخل مفتاح API الخاص بك من OpenAI (متوفر على [platform.openai.com/account/api-keys](https://platform.openai.com/account/api-keys)).

2.  **تخصيص الخيارات:**
    *   اختر وضع العرض (المنطقة النشطة أو صندوق الحوار).
    *   قم بتعيين اللون والشفافية ومدة عرض شريط الحالة.
    *   اختر اللغات للنسخ الصوتي (الإدخال الصوتي) ولعرض النص.
    *   فعّل أو عطّل ميزة الترجمة حسب احتياجاتك.

3.  **(اختياري) الاستخدام مع LiteLLM Proxy:**
    *   فعّل "الوضع الخبير" في الخيارات.
    *   في قسم "التكوين المتقدم"، عدّل **عنصري URLs** لواجهات البرمجة (Whisper والترجمة) لتشير إلى نسخة LiteLLM Proxy الخاصة بك. **استخدم نفس عنوان URL الأساسي لكليهما.**
    *   اختر خيار "NoLog (LiteLLM فقط)" إذا كنت ترغب في تعطيل تسجيل الاستعلامات بواسطة LiteLLM.

## 🚀 الاستخدام مع LiteLLM Proxy

إذا كنت ترغب في استخدام نماذج لغوية غير OpenAI، يمكنك استخدام LiteLLM Proxy. إليك كيفية تهيئته:

بابيل فيش إيه آي متوافق مع [LiteLLM Proxy](https://litellm.ai/)، الذي يسمح باستخدام نماذج لغوية بديلة بواجهة برمجة تطبيقات متوافقة مع OpenAI.

### التهيئة

1.  **قم بتثبيت وتكوين LiteLLM Proxy:** اتبع التعليمات على موقع LiteLLM.
2.  **قم بتكوين امتداد بابيل فيش إيه آي:**
    *   في خيارات الامتداد (انقر بزر الماوس الأيمن على الأيقونة > الخيارات)، فعّل "الوضع الخبير".
    *   في قسم "التكوين المتقدم"، عدّل **عنصري URLs** لواجهات البرمجة (Whisper والترجمة) لتشير إلى نسخة LiteLLM Proxy الخاصة بك (على سبيل المثال، `http://localhost:4000/v1/audio/transcriptions` و `http://localhost:4000/v1/chat/completions`). **استخدم نفس عنوان URL الأساسي لكليهما.**
    *   اختر خيار "NoLog (LiteLLM فقط)" إذا كنت ترغب في تعطيل تسجيل الاستعلامات بواسطة LiteLLM.

**هام:** خيار "NoLog" مصمم **حصرياً** للاستخدام مع LiteLLM Proxy. **لا تقم بتفعيله** إذا كنت تستخدم واجهة برمجة التطبيقات الرسمية لـ OpenAI، لأن ذلك سيتسبب في حدوث خطأ ويمنع عمل الترجمة.

## 🛠️ التشغيل التقني

### بنية الامتداد

يتكون الامتداد من عدة ملفات JavaScript تتفاعل مع بعضها البعض:

#### الملفات الرئيسية

*   **`manifest.json`:** الملف الرئيسي لتكوين الامتداد. يُحدد الأذونات والسكربتات والموارد المتاحة، إلخ. يستخدم النسخة 3 من البيان ويُعلن عن الأذونات `activeTab`، `storage`، `commands`، `scripting` و `contextMenus`.
*   **`background.js`:** عامل الخدمة (service worker) الذي يعمل في الخلفية. يدير الأحداث (النقر على الأيقونة، اختصارات لوحة المفاتيح، القائمة السياقية)، يقوم بحقن `content script` عند الحاجة، ويتواصل مع `content script`.
*   **`content.js`:** السكربت الرئيسي الذي يُحقن في صفحات الويب. ينسق الوحدات المساعدة المختلفة ويدير التدفق العام للامتداد.
*   **`src/constants.js`:** يُعرّف الثوابت الخاصة بالتكوين والحالات والإجراءات، إلخ.

#### الوحدات المساعدة

يستخدم الامتداد بنية معيارية مع عدة ملفات مساعدة متخصصة:

##### إدارة API ومعالجة البيانات

*   **`src/utils/api.js`:** يحتوي على الدوال اللازمة للتفاعل مع واجهات البرمجة، بما في ذلك `transcribeAudio` لاستدعاء API Whisper من OpenAI.
*   **`src/utils/api-utils.js`:** دوال متقدمة للتفاعل مع واجهات البرمجة الخارجية.
*   **`src/utils/translation.js`:** يحتوي على الدوال `translateText` و `rephraseText` لاستدعاء API GPT من OpenAI.
*   **`src/utils/text-translation.js`:** دوال متخصصة للترجمة وإعادة صياغة النص.
*   **`src/utils/text-processing.js`:** دوال عامة لمعالجة النص.

##### واجهة المستخدم والتفاعل

*   **`src/utils/ui.js`:** دوال مساعدة عامة لواجهة المستخدم.
*   **`src/utils/banner-utils.js`:** يدير شريط الحالة، عناصر التحكم به ومحدد اللغة.
*   **`src/utils/focus-utils.js`:** يدير حفظ واستعادة التركيز والتحديد النصي.
*   **`src/utils/transcription-display.js`:** يدير عرض نتائج النسخ.
*   **`src/utils/error-utils.js`:** يدير عرض الأخطاء ومعالجتها.
*   **`src/styles/content.css`:** أنماط CSS لواجهة المستخدم التي تُحقن في صفحات الويب.

##### التسجيل والأحداث

*   **`src/utils/recording-utils.js`:** يدير التسجيل الصوتي عبر الميكروفون ومعالجة البيانات الصوتية.
*   **`src/utils/event-handlers.js`:** يحتوي على معالجات الأحداث لتفاعلات المستخدم.

##### التدويل واللغات

*   **`src/utils/languages.js`:** يُعرّف اللغات المدعومة من الامتداد.
*   **`src/utils/languages-shared.js`:** يُعرّف قائمة اللغات المدعومة لسياق صفحة الويب.
*   **`src/utils/languages-data.js`:** يُعرّف قائمة اللغات المدعومة لعامل الخدمة.
*   **`src/utils/i18n.js`:** يدير التدويل لواجهة المستخدم.

##### صفحة الخيارات

*   **`src/pages/options/`:** يحتوي على الملفات الخاصة بصفحة خيارات الامتداد (HTML، CSS، JavaScript).

### عملية النسخ والترجمة

#### الوظيفة الرئيسية للنسخ الصوتي

1.  **بدء التسجيل:** يبدأ المستخدم التسجيل بالنقر على أيقونة الامتداد أو باستخدام اختصار لوحة المفاتيح (Ctrl+Shift+1 أو ⌘+Shift+1 على أجهزة الماك). يقوم `background script` بإرسال رسالة إلى `content script` لبدء التسجيل.
2.  **التقاط الصوت:** يستخدم `content script` واجهة برمجة التطبيقات `navigator.mediaDevices.getUserMedia` للوصول إلى الميكروفون وتسجيل الصوت باستخدام واجهة MediaRecorder.
3.  **النسخ:** يستخدم `content script` الدالة `transcribeAudio` (`src/utils/api.js`) لإرسال الصوت إلى API Whisper من OpenAI. تُعيد API النص المنسوخ.
4.  **الترجمة أو إعادة الصياغة (اختياري):** 
   - إذا تم تفعيل خيار الترجمة، يستخدم `content script` الدالة `translateText` (`src/utils/translation.js`) لإرسال النص المنسوخ إلى API GPT من OpenAI.
   - إذا تم تفعيل خيار إعادة الصياغة، تُستخدم الدالة `rephraseText` لتحسين النص المنسوخ.
5.  **العرض:** يقوم `content script` بعرض النص المعالج إما في العنصر النشط في الصفحة (إذا كان حقل نصي أو عنصر قابل للتحرير)، أو في صندوق حوار مخصص.

#### ميزة القائمة السياقية

1. **تحديد النص:** يقوم المستخدم بتحديد نص على صفحة الويب.
2. **القائمة السياقية:** ينبثق عند النقر بزر الماوس الأيمن الخيارات "إعادة صياغة التحديد" أو "ترجمة التحديد" مع قائمة فرعية للغات المتاحة.
3. **المعالجة:** حسب الخيار المختار:
   - يُرسل النص لإعادة الصياغة عبر الدالة `rephraseText`
   - يُرسل النص للترجمة عبر الدالة `translateText` باللغة الهدف المختارة
4.  **العرض:** يستبدل الناتج التحديد الأصلي في العنصر الذي يحتوي على النص المحدد.

### التواصل

يتم التواصل بين `background script` و `content script` عبر واجهة المراسلة في كروم (`chrome.runtime.sendMessage` و `chrome.runtime.onMessage`).

### تخزين البيانات

يستخدم الامتداد `chrome.storage.sync` لتخزين:

*   مفتاح API من OpenAI (`apiKey`).
*   خيارات الامتداد (العرض، الترجمة، ألوان الشريط، إلخ).
*   تفضيلات اللغة للترجمة.

يتم تخزين هذه البيانات محلياً على جهازك، في تخزين امتداد كروم.

### إدارة الأخطاء

يتم تعريف الأخطاء المحتملة (مفتاح API مفقود، خطأ في النسخ، إلخ) في ملف `constants.js`. تدير الدوال في `api.js` و `translation.js` الأخطاء المحتملة لاستدعاءات API. يعرض `content.js` رسائل الخطأ للمستخدم عبر شريط في أعلى الصفحة.

## 🛡️ الأمان والخصوصية

- **حماية البيانات:**
  - يتم تخزين مفتاح API بطريقة آمنة في كروم.
  - لا يحتفظ الامتداد ببيانات الصوت الخاصة بك؛ حيث تتم جميع المعالجات في الوقت الحقيقي.
  - يتم التواصل مع واجهات البرمجة عبر اتصالات HTTPS الآمنة.

للحصول على معلومات كاملة حول كيفية تعامل بابيل فيش إيه آي مع بياناتك، يرجى مراجعة [سياسة الخصوصية](PRIVACY.md).

## 🔧 استكشاف الأخطاء وإصلاحها

- **مشاكل الميكروفون:**
  - تحقق من أذونات الوصول إلى الميكروفون في كروم.
  - تأكد من عدم استخدام أي تطبيق آخر للميكروفون في نفس الوقت.

- **أخطاء النسخ/الترجمة:**
  - تحقق من أن مفتاح API صالح ومفعل.
  - تأكد من أن اتصال الإنترنت مستقر.
  - راجع وحدة التحكم في كروم للحصول على سجلات مفصلة في حالة حدوث خطأ.

## 🤝 المساهمة

المساهمات والاقتراحات مرحب بها. للمساهمة:
- قم بالإبلاغ عن الأخطاء عبر قسم القضايا على GitHub.
- اقترح تحسينات أو ميزات جديدة.
- قدم طلبات السحب.

## 📄 الترخيص

يتم توزيع هذا الامتداد تحت رخصة GNU Affero General Public License v3.0 (AGPL-3.0). راجع ملف LICENSE لمزيد من التفاصيل.

## 💝 الدعم

إذا أعجبك هذا الامتداد، يمكنك دعم تطويره من خلال التبرع عبر [PayPal](https://paypal.me/jls).
---
تم تطويره بشغف وابتكار بواسطة jls42.org، حيث يدفع بابيل فيش إيه آي النسخ والترجمة نحو آفاق جديدة بفضل الذكاء الاصطناعي المتقدم.

**تم ترجمة هذا المستند من النسخة fr إلى اللغة ar باستخدام نموذج o3-mini. لمزيد من المعلومات حول عملية الترجمة، يرجى زيارة https://gitlab.com/jls42/ai-powered-markdown-translator**

